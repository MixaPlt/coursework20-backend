from abc import ABC
import time
from cmath import sqrt


class BaseDriver(ABC):
    def image_url(self):
        raise NotImplementedError

    def name(self):
        raise NotImplementedError

    def location(self):
        raise NotImplementedError


def sqr(a):
    return a * a


class MockedDriver(BaseDriver):
    locations = []
    timestamp = 0
    speed = 0.0003
    next_point = 1

    def __init__(self, locations: [[]]):
        self.locations = locations
        self.timestamp = time.time()

    def image_url(self):
        return "https://www.google.com/url?sa=i&url=https%3A%2F%2Fcoub.com%2Fview%2F1owfrd&psig=AOvVaw0_hb2y-C2Lco4nDGBheble&ust=1622143017256000&source=images&cd=vfe&ved=0CAIQjRxqFwoTCIC0m_iH6PACFQAAAAAdAAAAABAD"

    def name(self):
        return "Oleg Oleynik"

    def location(self):
        new_timestamp = time.time()
        distance = self.speed * (new_timestamp - self.timestamp)
        prev_point = self.locations[self.next_point - 1]
        next_point = self.locations[self.next_point]
        while (sqr(prev_point[0] - next_point[0]) + sqr(prev_point[1] - next_point[1])).real <= sqr(distance).real:
            distance -= sqrt(sqr(prev_point[0] - next_point[0]) + sqr(prev_point[1] - next_point[1])).real
            self.next_point += 1
            self.next_point = self.next_point % len(self.locations)
            prev_point = self.locations[self.next_point - 1]
            next_point = self.locations[self.next_point]
            self.timestamp = new_timestamp

        segment_dis_prc = distance / sqrt(sqr(prev_point[0] - next_point[0]) + sqr(prev_point[1] - next_point[1])).real

        return [(next_point[0] - prev_point[0]) * segment_dis_prc + prev_point[0],
                (next_point[1] - prev_point[1]) * segment_dis_prc + prev_point[1]]


mocked_routes = [
    [
        [50.01446249308336, 36.22676655650139],
        [50.01238812937883, 36.22736904770135],
        [50.01276302101477, 36.23200725764036],
        [50.01238877574624, 36.235036477446556],
        [50.017157868684976, 36.232367008924484],
        [50.01685044278706, 36.2307134270668],
        [50.01961677420948, 36.22904475778341],
        [50.01901380034983, 36.22745420783758],
        [50.018733961035835, 36.2254448980093],
    ],

    [[50.02548, 36.23275], [50.02548, 36.23274], [50.02547, 36.23271], [50.02544, 36.2326], [50.02535, 36.23264],
     [50.02492, 36.23283], [50.02402, 36.23324], [50.02264, 36.23388], [50.0225, 36.23394], [50.02248, 36.23375],
     [50.02236, 36.23269], [50.02216, 36.23101], [50.02196, 36.22931], [50.02174, 36.22739], [50.02159, 36.22614],
     [50.02153, 36.22573], [50.02143, 36.22477], [50.02141, 36.22458], [50.0214, 36.22435], [50.02127, 36.22438],
     [50.02047, 36.22461], [50.01929, 36.22496], [50.01858, 36.22518], [50.01846, 36.22521], [50.01844, 36.22504],
     [50.01839, 36.22462], [50.0183, 36.22389], [50.01829, 36.22382], [50.01827, 36.22377], [50.01824, 36.22373],
     [50.0182, 36.22368], [50.01801, 36.2235], [50.01774, 36.22331], [50.01765, 36.22325], [50.01755, 36.22316],
     [50.01726, 36.22291], [50.01708, 36.22275], [50.01673, 36.22243], [50.01626, 36.22199], [50.01618, 36.22191],
     [50.01589, 36.22165], [50.01544, 36.22126], [50.01533, 36.22116], [50.01482, 36.22068], [50.0145, 36.22041],
     [50.01425, 36.22018], [50.01401, 36.21997], [50.01345, 36.21947], [50.01328, 36.21931], [50.01308, 36.21914],
     [50.01295, 36.21907], [50.01288, 36.21905], [50.01273, 36.21902], [50.0126, 36.21899], [50.01206, 36.21889],
     [50.01199, 36.21834], [50.01193, 36.21783], [50.01182, 36.21787], [50.01177, 36.21742], [50.01173, 36.21702],
     [50.01158, 36.21705], [50.01132, 36.21711], [50.0113, 36.2169], [50.01126, 36.21647], [50.01124, 36.21635],
     [50.01123, 36.21632], [50.01122, 36.21629], [50.01121, 36.21627], [50.0112, 36.21625], [50.01118, 36.21624],
     [50.01117, 36.21623], [50.01116, 36.21622], [50.01114, 36.21622], [50.01087, 36.21628], [50.01085, 36.21628],
     [50.01082, 36.21628], [50.0108, 36.21628], [50.01079, 36.21627], [50.01078, 36.21627], [50.01078, 36.21625],
     [50.01077, 36.21625], [50.01076, 36.21622], [50.01075, 36.21616], [50.01075, 36.21614], [50.01075, 36.21613],
     [50.01074, 36.21611], [50.01073, 36.2161], [50.01072, 36.21609], [50.01071, 36.21609], [50.01071, 36.21609],
     [50.01072, 36.21609], [50.01073, 36.2161], [50.01074, 36.21611], [50.01075, 36.21613], [50.01075, 36.21614],
     [50.01075, 36.21616], [50.01076, 36.21622], [50.01077, 36.21625], [50.01078, 36.21625], [50.01078, 36.21627],
     [50.01079, 36.21627], [50.0108, 36.21628], [50.01082, 36.21628], [50.01085, 36.21628], [50.01087, 36.21628],
     [50.01114, 36.21622], [50.01116, 36.21622], [50.01117, 36.21623], [50.01118, 36.21624], [50.0112, 36.21625],
     [50.01121, 36.21627], [50.01122, 36.21629], [50.01123, 36.21632], [50.01124, 36.21635], [50.01126, 36.21647],
     [50.0113, 36.2169], [50.01132, 36.21711], [50.01158, 36.21705], [50.01173, 36.21702], [50.01177, 36.21742],
     [50.01182, 36.21787], [50.01193, 36.21783], [50.01199, 36.21834], [50.01206, 36.21889], [50.0126, 36.21899],
     [50.01273, 36.21902], [50.01288, 36.21905], [50.01295, 36.21907], [50.01308, 36.21914], [50.01328, 36.21931],
     [50.01345, 36.21947], [50.01401, 36.21997], [50.01425, 36.22018], [50.0145, 36.22041], [50.01482, 36.22068],
     [50.01533, 36.22116], [50.01544, 36.22126], [50.01589, 36.22165], [50.01618, 36.22191], [50.01626, 36.22199],
     [50.01673, 36.22243], [50.01708, 36.22275], [50.01726, 36.22291], [50.01755, 36.22316], [50.01765, 36.22325],
     [50.01774, 36.22331], [50.01801, 36.2235], [50.0182, 36.22368], [50.01824, 36.22373], [50.01827, 36.22377],
     [50.01829, 36.22382], [50.0183, 36.22389], [50.01839, 36.22462], [50.01844, 36.22504], [50.01846, 36.22521],
     [50.01858, 36.22518], [50.01929, 36.22496], [50.02047, 36.22461], [50.02127, 36.22438], [50.0214, 36.22435],
     [50.02141, 36.22458], [50.02143, 36.22477], [50.02153, 36.22573], [50.02159, 36.22614], [50.02174, 36.22739],
     [50.02196, 36.22931], [50.02216, 36.23101], [50.02236, 36.23269], [50.02248, 36.23375], [50.0225, 36.23394],
     [50.02264, 36.23388], [50.02402, 36.23324], [50.02492, 36.23283], [50.02535, 36.23264], [50.02544, 36.2326],
     [50.02547, 36.23271], [50.02548, 36.23274], [50.02548, 36.23275]],

    [[50.00968, 36.23709], [50.00873, 36.23601], [50.00851, 36.23577], [50.00837, 36.2356], [50.00834, 36.23557],
     [50.00822, 36.23543], [50.00719, 36.23424], [50.00691, 36.23389], [50.00682, 36.23376], [50.00676, 36.23365],
     [50.00683, 36.23347], [50.00743, 36.23219], [50.00816, 36.23065], [50.00823, 36.23042], [50.00832, 36.23001],
     [50.00836, 36.22974], [50.00841, 36.22944], [50.00846, 36.22912], [50.00848, 36.22889], [50.00849, 36.22863],
     [50.00847, 36.22845], [50.00844, 36.22818], [50.00843, 36.22804], [50.00839, 36.22779], [50.00831, 36.22748],
     [50.0083, 36.22746], [50.00824, 36.22721], [50.0082, 36.2271], [50.00812, 36.2269], [50.00799, 36.22659],
     [50.00789, 36.22639], [50.00816, 36.22603], [50.0085, 36.2256], [50.0089, 36.22506], [50.00907, 36.22483],
     [50.00953, 36.22428], [50.00993, 36.22371], [50.00998, 36.22361], [50.01028, 36.22297], [50.01067, 36.22217],
     [50.01089, 36.22171], [50.011, 36.22142], [50.01134, 36.22071], [50.01145, 36.22044], [50.01155, 36.22017],
     [50.01172, 36.21953], [50.01184, 36.21901], [50.01206, 36.21889], [50.01199, 36.21834], [50.01193, 36.21783],
     [50.01208, 36.21779], [50.01228, 36.21773], [50.01355, 36.21724], [50.01363, 36.21721], [50.0137, 36.21719],
     [50.01407, 36.21703], [50.0142, 36.21697], [50.01448, 36.21684], [50.01504, 36.21653], [50.01577, 36.21606],
     [50.01584, 36.21602], [50.01667, 36.21542], [50.01778, 36.21462], [50.01897, 36.21373], [50.01938, 36.21346],
     [50.01952, 36.21336], [50.01966, 36.21325], [50.02092, 36.21234], [50.02152, 36.21189], [50.02241, 36.21114],
     [50.02369, 36.21006], [50.02381, 36.21034], [50.02403, 36.21089], [50.02422, 36.2114], [50.02458, 36.21231],
     [50.02483, 36.21295], [50.02504, 36.21274], [50.02581, 36.21202], [50.02584, 36.212], [50.02586, 36.21197],
     [50.02588, 36.21194], [50.02588, 36.21192], [50.02589, 36.21189], [50.02589, 36.21187], [50.02589, 36.21185],
     [50.02588, 36.21184], [50.02566, 36.21124], [50.02553, 36.21092], [50.02553, 36.21091], [50.02552, 36.21091],
     [50.0255, 36.2109], [50.02548, 36.2109], [50.02547, 36.21091], [50.02547, 36.21091], [50.02548, 36.2109],
     [50.0255, 36.2109], [50.02552, 36.21091], [50.02553, 36.21091], [50.02553, 36.21092], [50.02566, 36.21124],
     [50.02588, 36.21184], [50.02589, 36.21185], [50.02589, 36.21187], [50.02589, 36.21189], [50.02588, 36.21192],
     [50.02588, 36.21194], [50.02586, 36.21197], [50.02584, 36.212], [50.02581, 36.21202], [50.02504, 36.21274],
     [50.02483, 36.21295], [50.02458, 36.21231], [50.02422, 36.2114], [50.02403, 36.21089], [50.02381, 36.21034],
     [50.02369, 36.21006], [50.02241, 36.21114], [50.02152, 36.21189], [50.02092, 36.21234], [50.01966, 36.21325],
     [50.01952, 36.21336], [50.01938, 36.21346], [50.01897, 36.21373], [50.01778, 36.21462], [50.01667, 36.21542],
     [50.01584, 36.21602], [50.01577, 36.21606], [50.01504, 36.21653], [50.01448, 36.21684], [50.0142, 36.21697],
     [50.01407, 36.21703], [50.0137, 36.21719], [50.01363, 36.21721], [50.01355, 36.21724], [50.01228, 36.21773],
     [50.01208, 36.21779], [50.01193, 36.21783], [50.01199, 36.21834], [50.01206, 36.21889], [50.01184, 36.21901],
     [50.01172, 36.21953], [50.01155, 36.22017], [50.01145, 36.22044], [50.01134, 36.22071], [50.011, 36.22142],
     [50.01089, 36.22171], [50.01067, 36.22217], [50.01028, 36.22297], [50.00998, 36.22361], [50.00993, 36.22371],
     [50.00953, 36.22428], [50.00907, 36.22483], [50.0089, 36.22506], [50.0085, 36.2256], [50.00816, 36.22603],
     [50.00789, 36.22639], [50.00799, 36.22659], [50.00812, 36.2269], [50.0082, 36.2271], [50.00824, 36.22721],
     [50.0083, 36.22746], [50.00831, 36.22748], [50.00839, 36.22779], [50.00843, 36.22804], [50.00844, 36.22818],
     [50.00847, 36.22845], [50.00849, 36.22863], [50.00848, 36.22889], [50.00846, 36.22912], [50.00841, 36.22944],
     [50.00836, 36.22974], [50.00832, 36.23001], [50.00823, 36.23042], [50.00816, 36.23065], [50.00743, 36.23219],
     [50.00683, 36.23347], [50.00676, 36.23365], [50.00682, 36.23376], [50.00691, 36.23389], [50.00719, 36.23424],
     [50.00822, 36.23543], [50.00834, 36.23557], [50.00837, 36.2356], [50.00851, 36.23577], [50.00873, 36.23601],
     [50.00968, 36.23709]],

    [[49.99365, 36.24375], [49.99368, 36.2437], [49.99369, 36.24367], [49.9937, 36.24364], [49.9937, 36.24362],
     [49.99369, 36.24359], [49.99368, 36.24357], [49.99366, 36.24354], [49.99364, 36.24351], [49.99363, 36.24348],
     [49.99363, 36.24343], [49.99362, 36.24335], [49.99361, 36.24326], [49.9936, 36.24323], [49.99358, 36.2432],
     [49.99353, 36.24312], [49.99334, 36.24281], [49.99358, 36.24242], [49.99414, 36.24176], [49.99431, 36.24159],
     [49.99452, 36.24146], [49.99463, 36.24141], [49.99472, 36.24136], [49.9948, 36.24132], [49.99519, 36.24115],
     [49.99563, 36.24095], [49.99566, 36.24094], [49.99617, 36.24073], [49.9963, 36.24068], [49.99698, 36.24042],
     [49.99798, 36.24003], [49.99862, 36.24089], [49.99869, 36.24054], [49.99875, 36.24005], [49.99881, 36.23947],
     [49.99886, 36.23893], [49.99894, 36.23813], [49.99899, 36.23753], [49.99918, 36.23586], [49.99929, 36.23495],
     [49.99937, 36.23431], [49.9994, 36.23415], [49.99954, 36.2342], [50.00125, 36.23479], [50.00187, 36.23499],
     [50.00261, 36.23525], [50.00303, 36.23539], [50.00371, 36.23562], [50.00388, 36.23567], [50.00456, 36.2359],
     [50.00506, 36.23606], [50.00528, 36.23615], [50.00546, 36.23624], [50.00561, 36.23631], [50.00573, 36.23638],
     [50.00582, 36.23608], [50.00589, 36.23589], [50.00605, 36.23543], [50.00619, 36.23502], [50.0064, 36.23449],
     [50.0065, 36.23424], [50.00669, 36.23372], [50.00676, 36.23365], [50.00683, 36.23347], [50.00743, 36.23219],
     [50.00816, 36.23065], [50.00823, 36.23042], [50.00832, 36.23001], [50.00836, 36.22974], [50.00841, 36.22944],
     [50.00846, 36.22912], [50.00848, 36.22889], [50.00849, 36.22863], [50.00847, 36.22845], [50.00855, 36.22842],
     [50.0098, 36.22803], [50.00985, 36.22801], [50.0104, 36.22785], [50.01052, 36.22781], [50.01197, 36.2274],
     [50.01207, 36.22737], [50.01265, 36.2272], [50.01417, 36.22672], [50.01589, 36.22621], [50.01599, 36.22619],
     [50.01611, 36.22615], [50.01778, 36.22565], [50.0179, 36.22562], [50.01792, 36.22581], [50.01798, 36.22619],
     [50.01804, 36.22662], [50.01808, 36.2269], [50.01813, 36.22738], [50.01797, 36.22742], [50.01797, 36.22742],
     [50.01813, 36.22738], [50.01808, 36.2269], [50.01804, 36.22662], [50.01798, 36.22619], [50.01792, 36.22581],
     [50.0179, 36.22562], [50.01778, 36.22565], [50.01611, 36.22615], [50.01599, 36.22619], [50.01589, 36.22621],
     [50.01417, 36.22672], [50.01265, 36.2272], [50.01207, 36.22737], [50.01197, 36.2274], [50.01052, 36.22781],
     [50.0104, 36.22785], [50.00985, 36.22801], [50.0098, 36.22803], [50.00855, 36.22842], [50.00847, 36.22845],
     [50.00849, 36.22863], [50.00848, 36.22889], [50.00846, 36.22912], [50.00841, 36.22944], [50.00836, 36.22974],
     [50.00832, 36.23001], [50.00823, 36.23042], [50.00816, 36.23065], [50.00743, 36.23219], [50.00683, 36.23347],
     [50.00676, 36.23365], [50.00669, 36.23372], [50.0065, 36.23424], [50.0064, 36.23449], [50.00619, 36.23502],
     [50.00605, 36.23543], [50.00589, 36.23589], [50.00582, 36.23608], [50.00573, 36.23638], [50.00561, 36.23631],
     [50.00546, 36.23624], [50.00528, 36.23615], [50.00506, 36.23606], [50.00456, 36.2359], [50.00388, 36.23567],
     [50.00371, 36.23562], [50.00303, 36.23539], [50.00261, 36.23525], [50.00187, 36.23499], [50.00125, 36.23479],
     [49.99954, 36.2342], [49.9994, 36.23415], [49.99937, 36.23431], [49.99929, 36.23495], [49.99918, 36.23586],
     [49.99899, 36.23753], [49.99894, 36.23813], [49.99886, 36.23893], [49.99881, 36.23947], [49.99875, 36.24005],
     [49.99869, 36.24054], [49.99862, 36.24089], [49.99798, 36.24003], [49.99698, 36.24042], [49.9963, 36.24068],
     [49.99617, 36.24073], [49.99566, 36.24094], [49.99563, 36.24095], [49.99519, 36.24115], [49.9948, 36.24132],
     [49.99472, 36.24136], [49.99463, 36.24141], [49.99452, 36.24146], [49.99431, 36.24159], [49.99414, 36.24176],
     [49.99358, 36.24242], [49.99334, 36.24281], [49.99353, 36.24312], [49.99358, 36.2432], [49.9936, 36.24323],
     [49.99361, 36.24326], [49.99362, 36.24335], [49.99363, 36.24343], [49.99363, 36.24348], [49.99364, 36.24351],
     [49.99366, 36.24354], [49.99368, 36.24357], [49.99369, 36.24359], [49.9937, 36.24362], [49.9937, 36.24364],
     [49.99369, 36.24367], [49.99368, 36.2437], [49.99365, 36.24375]],
]
drivers = []


def provide_drivers():
    if len(drivers) == 0:
        for route in mocked_routes:
            drivers.append(MockedDriver(route))
    return drivers
